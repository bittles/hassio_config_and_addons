mqtt:
  # Required: host name
  host: 192.168.29.189
  # Optional: port (default: shown below)
  port: 1883
  # Optional: topic prefix (default: shown below)
  # NOTE: must be unique if you are running multiple instances
  topic_prefix: frigate
  # Optional: client id (default: shown below)
  # NOTE: must be unique if you are running multiple instances
  client_id: frigate
  # Optional: user
  user: mqtt
  # Optional: password
  # NOTE: MQTT password can be specified with an environment variables that must begin with 'FRIGATE_'.
  #       e.g. password: '{FRIGATE_MQTT_PASSWORD}'
  password: mosquitto

cameras:
  front_porch:
    ffmpeg:
      inputs:
        - path: rtsp://porchcam:wt2g6VXd4V@192.168.29.118/live
          roles:
            - detect
            - rtmp
    detect:
      width: 1024
      height: 576
      fps: 5
    motion:
      mask:
        - 0,234,0,576,172,576,157,301,283,293,275,179,272,71,310,30,443,31,429,0,257,0,136,0,0,0
        - 1024,0,513,0,470,83,434,50,399,60,374,88,437,293,1024,509
        - 876,564,1007,565,998,543,893,538
    
  driveway:
    ffmpeg:
      inputs:
        - path: rtsp://driveway:kPaWrZG8A9@192.168.29.117/live
          roles:
            - detect
            - rtmp
    detect:
      width: 1024
      height: 576
      fps: 5
    motion:
      mask:
        - 177,0,0,0,0,78
        - 935,0,1024,0,1024,31
        - 883,540,890,563,998,565,994,539
        - 0,131,59,32,107,75,84,96,79,120,137,137,112,226,213,246,215,355,123,378,78,409,0,551
        - 191,576,220,490,132,484,72,500,0,558,0,576
        - 1024,113,1024,576,984,576,936,319,961,224,1006,129

detect:
  # Optional: Number of frames without a detection before frigate considers an object to be gone. (default: 5x the frame rate)
  max_disappeared: 25

# Optional: birdseye configuration
birdseye:
  # Optional: Enable birdseye view (default: shown below)
  enabled: True
  # Optional: Width of the output resolution (default: shown below)
  width: 1280
  # Optional: Height of the output resolution (default: shown below)
  height: 720
  # Optional: Encoding quality of the mpeg1 feed (default: shown below)
  # 1 is the highest quality, and 31 is the lowest. Lower quality feeds utilize less CPU resources.
  quality: 8
  # Optional: Mode of the view. Available options are: objects, motion, and continuous
  #   objects - cameras are included if they have had a tracked object within the last 30 seconds
  #   motion - cameras are included if motion was detected in the last 30 seconds
  #   continuous - all cameras are included always
  mode: objects

snapshots:
  # Optional: Enable writing jpg snapshot to /media/frigate/clips (default: shown below)
  # This value can be set via MQTT and will be updated in startup based on retained value
  enabled: True
  # Optional: print a timestamp on the snapshots (default: shown below)
  timestamp: True
  # Optional: draw bounding box on the snapshots (default: shown below)
  bounding_box: True
  # Optional: crop the snapshot (default: shown below)
  crop: False
  # Optional: height to resize the snapshot to (default: original size)
  #height: 175
  # Optional: Restrict snapshots to objects that entered any of the listed zones (default: no required zones)
  required_zones: []
  # Optional: Camera override for retention settings (default: global values)
  retain:
    # Required: Default retention days (default: shown below)
    default: 10
    # Optional: Per object retention days
    #objects:
    #  person: 15

detectors:
  cpu1:
    type: cpu
    num_threads: 5
  cpu2:
    type: cpu
    num_threads: 5

ffmpeg:
  # Optional: global ffmpeg args (default: shown below)
#  global_args: -hide_banner -loglevel warning
  
  # Optional: global hwaccel args (default: shown below)
  # NOTE: See hardware acceleration docs for your specific device
  
  hwaccel_args: -hwaccel drm -hwaccel_device /dev/dri/renderD128
    
  # Optional: global input args (default: shown below)
#  input_args: -avoid_negative_ts make_zero -fflags +genpts+discardcorrupt -rtsp_transport tcp -stimeout 5000000 -use_wallclock_as_timestamps 1
  
  input_args: -avoid_negative_ts make_zero -fflags nobuffer -flags low_delay -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1
  # DONT USE-rw_timeout 5000000
  #test removed
  #-strict experimental
  
  # Optional: global output args
  #output_args:
  #  # Optional: output args for detect streams (default: shown below)
  #  detect: -f rawvideo -pix_fmt yuv420p
  #  # Optional: output args for record streams (default: shown below)
  #  record: -f segment -segment_time 10 -segment_format mp4 -reset_timestamps 1 -strftime 1 -c copy -an
  #  # Optional: output args for rtmp streams (default: shown below)
  #  rtmp: -c copy -f flv
  #  
  output_args:
    record: -f segment -segment_time 10 -segment_format mp4 -reset_timestamps 1 -strftime 1 -c:v libx264 -an
    rtmp: -c copy -an -f flv
#    rtmp: -c:a libfdk_aac -b:a 100k -c:v copy -f flv
#    rtmp: -c:v libx264 -an -f flv

objects:
  # Optional: list of objects to track from labelmap.txt (default: shown below)
  track:
    - person
    - bicycle
    - car
    - motorcycle
#    - airplane
    - bus
#    - train
    - car
#    - boat
#    - traffic light
#    - fire hydrant
#    - stop sign
#    - parking meter
#    - bench
    - bird
    - cat
    - dog


motion:
  # Optional: The threshold passed to cv2.threshold to determine if a pixel is different enough to be counted as motion. (default: shown below)
  # Increasing this value will make motion detection less sensitive and decreasing it will make motion detection more sensitive.
  # The value should be between 1 and 255.
  
  threshold: 10
  
  # Optional: Minimum size in pixels in the resized motion image that counts as motion (default: ~0.17% of the motion frame area)
  # Increasing this value will prevent smaller areas of motion from being detected. Decreasing will make motion detection more sensitive to smaller
  # moving objects.
  
  contour_area: 100
  
  # Optional: Alpha value passed to cv2.accumulateWeighted when averaging the motion delta across multiple frames (default: shown below)
  # Higher values mean the current frame impacts the delta a lot, and a single raindrop may register as motion.
  # Too low and a fast moving person wont be detected as motion.
  
  delta_alpha: 0.2
  
  # Optional: Alpha value passed to cv2.accumulateWeighted when averaging frames to determine the background (default: shown below)
  # Higher values mean the current frame impacts the average a lot, and a new object will be averaged into the background faster.
  # Low values will cause things like moving shadows to be detected as motion for longer.
  # https://www.geeksforgeeks.org/background-subtraction-in-an-image-using-concept-of-running-average/
  
  frame_alpha: 0.2
  
  # Optional: Height of the resized motion frame  (default: 1/6th of the original frame height, but no less than 180)
  # This operates as an efficient blur alternative. Higher values will result in more granular motion detection at the expense of higher CPU usage.
  # Lower values result in less CPU, but small changes may not register as motion.
  
  frame_height: 180
  
  # Optional: motion mask
  # NOTE: see docs for more detailed info on creating masks
  
